import _slicedToArray from"@babel/runtime/helpers/slicedToArray";import React,{useEffect,useState}from"react";import ArrowLeftOutline from"@scaleflex/icons/arrow-left-outline";import Menu from"@scaleflex/ui/core/menu";import MenuItem,{MenuItemIcon,MenuItemLabel}from"@scaleflex/ui/core/menu-item";import{StyledMainButton,StyledButtonWrapper,StyledMenuButton}from"./ButtonWithMenu.styled";var isFieButtonWithMenuMounted=!0,ButtonWithMenu=function(a){var b=a.label,c=a.onClick,d=a.title,e=a.color,f=a.menuFromBtn,g=a.menuItems,h=a.menuPosition,i=void 0===h?"bottom":h,j=a.arrowColor,k=a.disabled,l=void 0!==k&&k,m=a.className,n=a.menuStyle,o=a.wrapperStyle,p=a.buttonRef,q=useState(null),r=_slicedToArray(q,2),s=r[0],t=r[1],u="md",v=g.filter(Boolean),w=1<v.length,x=function(a){isFieButtonWithMenuMounted&&(a.stopPropagation(),t(a.currentTarget))},y=function(){isFieButtonWithMenuMounted&&t(null)},z=function(a){"function"==typeof a&&a(),y()};return useEffect(function(){return isFieButtonWithMenuMounted=!0,function(){isFieButtonWithMenuMounted=!1}},[]),React.createElement(React.Fragment,null,React.createElement(StyledButtonWrapper,{className:"".concat(m,"-wrapper"),onClick:l?void 0:function handleButtonClick(a){var b;return f&&w?void x(a):void("function"==typeof c?c():null!==(b=v[0])&&void 0!==b&&b.onClick&&v[0].onClick())},style:o,ref:p},React.createElement(StyledMainButton,{className:"".concat(m,"-button"),color:e,size:u,title:d,keepBorderRadius:!w,disabled:l},b),w&&React.createElement(StyledMenuButton,{className:"".concat(m,"-menu-opener"),color:e,size:u,onClick:f||l?void 0:x,disabled:l},React.createElement(ArrowLeftOutline,{color:j}))),w&&React.createElement(Menu,{className:"".concat(m,"-menu"),anchorEl:s,onClose:y,open:!0,style:n,position:i},g.map(function(a){return a&&React.createElement(MenuItem,{className:"".concat(m,"-menu-item"),key:a.key,active:a.isActive,onClick:function(){return z(a.onClick)},size:u},a.icon&&React.createElement(MenuItemIcon,{size:u},"string"==typeof a.icon?React.createElement("span",{dangerouslySetInnerHTML:{__html:a.icon}}):React.createElement(a.icon,null)),React.createElement(MenuItemLabel,null,a.label))})))};ButtonWithMenu.defaultProps={title:"",color:"primary",menuFromBtn:!1,menuPosition:"bottom",onClick:void 0,disabled:!1,arrowColor:void 0,menuStyle:void 0,wrapperStyle:void 0,buttonRef:void 0};export default ButtonWithMenu;